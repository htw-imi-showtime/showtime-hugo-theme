{{ $video := newScratch }}
{{ if .IsNamedParams }}
    {{ if $.Page.Resources.GetMatch (.Get "src") }}
        {{ $video.Set "src" ($.Page.Resources.GetMatch (.Get "src")) }}
    {{ else }}
        {{ $video.Set "src" ($.Page.Parent.Resources.GetMatch (.Get "src")) }}
    {{ end }}
    {{ $video.Set "image" (.Get "image") }}
    {{ $video.Set "description" (.Get "description") }}
{{ else }}
    {{ if $.Page.Resources.GetMatch (.Get 0) }}
        {{ $video.Set "src" ($.Page.Resources.GetMatch (.Get 0)) }}
    {{ else }}
        {{ $video.Set "src" ($.Page.Parent.Resources.GetMatch (.Get 0)) }}
    {{ end }}
    {{ $video.Set "image" (.Get 1) }}
    {{ $video.Set "description" (.Get 2) }}
{{ end }}

<video controls>
    {{ with $video.Get "src" }}
    <source src="{{ .RelPermalink }}" type="video/{{ .ResourceType }}">
    {{ end }}
    Sorry, your browser doesn't support embedded videos.
</video>
