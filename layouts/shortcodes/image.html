{{ $image := newScratch }}
{{ if .IsNamedParams }}
    {{ $image.Set "src" ($.Page.Resources.GetMatch (.Get "src")) }}
    {{ $image.Set "alt" (.Get "alt") }}
    {{ $image.Set "description" (.Get "description") }}
{{ else }}
    {{ $image.Set "src" ($.Page.Resources.GetMatch (.Get 0)) }}
    {{ $image.Set "alt" (.Get 1) }}
    {{ $image.Set "description" (.Get 2) }}
{{ end }}

<figure>
    <img src="{{ ($image.Get "src").RelPermalink }}" alt="{{ $image.Get "alt" }}">
    {{ if $image.Get "description" }}
    <figcaption>{{ $image.Get "description" }}</figcaption>
    {{ end }}
</figure>
